{"version":3,"sources":["lib/photo.utils.ts","components/Preview.tsx","components/Photos.tsx","components/SearchBar.tsx","components/TopBar.tsx","lib/localStorage.hooks.tsx","lib/flickr.apis.ts","components/CookieConsent.tsx","components/ViewersWarning.tsx","App.tsx","lib/scroll.hooks.tsx","reportWebVitals.ts","index.tsx"],"names":["PHOTO_SIZE","makeUrl","photo","small","farm","server","id","secret","medium","photosToImages","photos","map","p","url","alt","title","Preview","props","replace","_nTo_z","onClick","e","stopPropagation","style","position","Modal","open","onClose","handleClose","border","top","left","transform","boxShadow","color","borderRadius","Typography","variant","component","backgroundColor","padding","src","ImageContainer","styled","Paper","theme","typography","body2","spacing","textAlign","palette","text","secondary","Photos","stacks","filter","_","i","Box","sx","flexGrow","Grid","container","images","stackIndex","item","xs","Stack","index","Photo","React","setOpen","width","SearchBar","searchTerms","reverse","handleInputChange","v","r","console","log","activateSearch","deactivateSearch","Autocomplete","disablePortal","className","options","renderInput","params","TextField","label","onInputChange","debounce","noOptionsText","onChange","selectOnFocus","TopBar","AppBar","Toolbar","Link","href","underline","searchProps","SEARCH_TERMS_KEY","COOKIES_CONSENT_KEY","COOKIES_CONSENT_ACCEPTED","COOKIES_CONSENT_REJECTED","VIEWERS_WARNING_KEY","VIEWERS_WARNING_ACCEPTED","featureAvailable","localStorage","setItem","getItem","removeItem","append","key","value","exists","values","JSON","parse","includes","slice","indexOf","push","stringify","API_KEY","FORMAT","NO_JSONP","BASE","CookieConsent","saveConsent","fetchConsent","clearConsent","rejectConsent","isRejected","isAccepted","useState","accepted","setAccepted","rejected","setRejected","Alert","severity","AlertTitle","Button","window","close","ViewersWarning","accept","reject","defaultState","isLoading","loadingMessage","hasError","errorMessage","error","undefined","recentPhotos","searchPhotos","isInSearch","isInRecent","currentSearchTerm","page","perPage","App","appState","setAppState","saveSearchTerm","searchTerm","length","fetchSearchTerms","clearSearchTerms","scrollTop","setScrollTop","document","documentElement","scrollHeight","setScrollHeight","useEffect","debounced","st","sh","addEventListener","removeEventListener","useScroll","fetchRecentFromNetwork","fetch","recentApi","then","res","json","data","s","catch","state","Fragment","CssBaseline","CircularProgress","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.731e68ee.chunk.js","sourcesContent":["import {FlickrPhoto} from \"./flickr.types\";\nimport {Image, ImageURLs} from \"./app.types\";\n\n\nconst PHOTO_SIZE = {\n    thumbnail75: '_s',\n    thumbnail150: '_q',\n    thumbnail100: '_t',\n    small240: '_m',\n    small320: '_n',\n    small400: '_w',\n    medium500: '',\n    medium640: '_z',\n    medium800: '_c'\n};\n\nfunction photosToUrls(photos: FlickrPhoto[]): ImageURLs[] {\n    return photos.map(makeUrl);\n}\n\nfunction makeUrl(photo: FlickrPhoto): ImageURLs {\n    return {\n        small: `https://farm${photo.farm}.static.flickr.com/${photo.server}/${photo.id}_${photo.secret}${PHOTO_SIZE.small320}.jpg`,\n        medium: `https://farm${photo.farm}.static.flickr.com/${photo.server}/${photo.id}_${photo.secret}${PHOTO_SIZE.medium800}.jpg`\n    };\n}\n\nfunction photosToImages(photos: FlickrPhoto[]): Image[] {\n    return photos.map((p: FlickrPhoto) => {\n        const url = makeUrl(p);\n        const alt = p.title;\n        const title = `${p.title}`;\n        return {url, alt, title};\n    });\n}\n\nfunction _nTo_z(url: string): string {\n    return url.replace('_n', '_z');\n}\n\nexport {makeUrl, photosToUrls, photosToImages, _nTo_z};\n","import {_nTo_z} from \"../lib/photo.utils\";\nimport {Modal, Typography} from \"@material-ui/core\";\n\nfunction Preview(props: any) {\n    const url = _nTo_z(props.url);\n\n    return (\n        <div onClick={e => e.stopPropagation()} style={{position: \"relative\"}}>\n            <Modal\n                open={props.open}\n                onClose={props.handleClose}\n                aria-labelledby=\"modal-modal-title\"\n            >\n                <div style={{\n                    border: \"thick solid white\",\n                    top: \"50%\",\n                    left: \"50%\",\n                    transform: \"translate(-50%, -50%)\",\n                    position: \"absolute\",\n                    boxShadow: \"2px 2px 5px black\",\n                    color: \"white\",\n                    borderRadius: \"4px\"\n                }}>\n                    <Typography id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\n                        <div style={{\n                            backgroundColor: 'black',\n                            padding: \"0.5rem\"\n                        }}>\n                            {props.title}\n                        </div>\n                    </Typography>\n\n                    <div>\n                        <img src={url} alt={`${props.title} at ${url}`}/>\n                    </div>\n                </div>\n            </Modal>\n        </div>\n    );\n}\n\nexport default Preview;","import * as React from 'react';\nimport {styled} from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport {Image, PhotosProps} from '../lib/app.types';\nimport {Modal, Stack, Typography} from '@material-ui/core';\nimport Preview from \"./Preview\";\n\nconst ImageContainer = styled(Paper)(({theme}) => ({\n    ...theme.typography.body2,\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n}));\n\n\nfunction Photos(props: PhotosProps) {\n\n\n    const {photos} = props;\n    const stacks = [\n        photos.filter((_, i: number) => i % 4 === 0),\n        photos.filter((_, i: number) => i % 4 === 1),\n        photos.filter((_, i: number) => i % 4 === 2),\n        photos.filter((_, i: number) => i % 4 === 3),\n    ];\n    return (\n        <Box sx={{flexGrow: 1}}>\n            <Grid container spacing={2}>\n                {stacks.map((images: Image[], stackIndex: number) => {\n                    return (\n                        <Grid item xs={3} key={`photos-grid-${stackIndex}`}>\n                            <Stack spacing={2} key={`photos-stack-${stackIndex}`}>\n                                {images.map((photo: Image, index: number) => {\n                                    return (\n                                        <Photo\n                                            photo={photo}\n                                            index={index}\n                                        />\n                                    );\n                                })}\n                            </Stack>\n                        </Grid>\n                    );\n                })}\n            </Grid>\n\n        </Box>\n    );\n}\n\nexport default Photos;\n\nfunction Photo(props: any) {\n    const [open, setOpen] = React.useState(false);\n    const handleOpen = () => setOpen(true);\n    const handleClose = () => setOpen(false);\n    const {photo, index} = props;\n    return (\n        <ImageContainer key={`image-container-${index}`}>\n            <img src={photo.url.small}\n                 alt={photo.alt}\n                 title={`${photo.title} at ${photo.url.small}`}\n                 style={{width: '100%'}}\n                 onClick={handleOpen}\n            />\n            {open &&\n            <Preview\n                open={open}\n                handleClose={handleClose}\n                alt={photo.alt}\n                url={photo.url.medium}\n                title={photo.title}\n            />\n            }\n        </ImageContainer>\n    );\n}","import {\n    Autocomplete,\n    AutocompleteChangeReason,\n    AutocompleteCloseReason,\n    AutocompleteInputChangeReason,\n    debounce,\n    TextField\n} from \"@material-ui/core\";\nimport {SearchBarProps} from \"../lib/app.types\";\nimport {SyntheticEvent} from \"react\";\n\nfunction SearchBar(props: SearchBarProps) {\n    const searchTerms = props.searchTerms.reverse();\n\n    function handleInputChange(e: SyntheticEvent, v: string, r: AutocompleteInputChangeReason | AutocompleteChangeReason) {\n        console.log(e, v, r);\n        if (r === 'input') {\n            props.activateSearch(v);\n        }\n        if (r === 'clear') {\n            props.deactivateSearch();\n        }\n        if (r === 'selectOption') {\n            console.log(v);\n            props.activateSearch(v);\n        }\n    }\n\n    function handleClose(e: SyntheticEvent<Element, Event>, r: AutocompleteCloseReason) {\n        console.log('closed');\n        props.deactivateSearch();\n    }\n\n    return (\n        <Autocomplete\n            disablePortal={true}\n            className={\"search-autocomplete\"}\n            id=\"search-bar-input\"\n            options={searchTerms}\n            sx={{width: 400}}\n            renderInput={(params) => <TextField {...params} label=\"Search\"/>}\n            onInputChange={debounce(handleInputChange, 400)}\n            // onClose={handleClose}\n            noOptionsText={''}\n            onChange={(e, v, r) => handleInputChange(e, v as string, r)}\n            selectOnFocus={true}\n        />\n    );\n}\n\nexport {SearchBar};\n","import {AppBar, Box, Link, Toolbar, Typography} from \"@material-ui/core\";\nimport {SearchBar} from \"./SearchBar\";\nimport {TopBarProps} from \"../lib/app.types\";\n\nfunction TopBar(props: TopBarProps) {\n    return (\n        <Box sx={{flexGrow: 1}} className={'topbar-box'}>\n            <AppBar position=\"fixed\">\n                <Toolbar>\n                    <Typography variant=\"h6\" component=\"div\" sx={{flexGrow: 1}}>\n                        <Link href=\"/infinite-scroll\" underline=\"none\" color={\"white\"}>\n                            Infinite Scroll\n                        </Link>\n                    </Typography>\n                    <SearchBar {...props.searchProps}/>\n                </Toolbar>\n            </AppBar>\n        </Box>\n    );\n}\n\nexport {TopBar};\n","const SEARCH_TERMS_KEY = 'SEARCH_TERMS';\nconst COOKIES_CONSENT_KEY = 'COOKIES_CONSENT';\nconst COOKIES_CONSENT_ACCEPTED = 'cookie_consent_accepted';\nconst COOKIES_CONSENT_REJECTED = 'cookie_consent_rejected';\n\nconst VIEWERS_WARNING_KEY = 'VIEWERS_WARNING';\nconst VIEWERS_WARNING_ACCEPTED = 'viewers_warning_accepted';\nconst VIEWERS_WARNING_REJECTED = 'viewers_warning_rejected';\n\n\nfunction featureAvailable() {\n    if (typeof localStorage !== 'undefined') {\n        try {\n            localStorage.setItem('feature_test', 'yes');\n            if (localStorage.getItem('feature_test') === 'yes') {\n                localStorage.removeItem('feature_test');\n                // localStorage is enabled\n                return true;\n            } else {\n                // localStorage is disabled\n                return false;\n            }\n        } catch (e) {\n            // localStorage is disabled\n            return false;\n        }\n    } else {\n        // localStorage is not available\n        return false;\n    }\n}\n\nfunction exists(key: string) {\n    if (featureAvailable()) {\n        return localStorage.getItem(key) !== null;\n    }\n}\n\nfunction append<T>(key: string, value: T) {\n    if (featureAvailable()) {\n        if (exists(key)) {\n            let values = JSON.parse(localStorage.getItem(key) as string);\n            if (!values.includes(value)) {\n                values.push(value);\n            } else {\n                values = [...values.slice(0, values.indexOf(value)), ...values.slice(values.indexOf(value) + 1), value];\n            }\n            localStorage.setItem(key, JSON.stringify(values));\n        } else {\n            const values = [value];\n            localStorage.setItem(key, JSON.stringify(values));\n        }\n    }\n}\n\nfunction useCookiesConsent() {\n    function saveConsent() {\n        localStorage.setItem(COOKIES_CONSENT_KEY, COOKIES_CONSENT_ACCEPTED);\n    }\n\n    function fetchConsent() {\n        return localStorage.getItem(COOKIES_CONSENT_KEY);\n    }\n\n    function rejectConsent() {\n        localStorage.setItem(COOKIES_CONSENT_KEY, COOKIES_CONSENT_REJECTED);\n    }\n\n    function clearConsent() {\n        localStorage.removeItem(COOKIES_CONSENT_KEY);\n    }\n\n    function isAccepted() {\n        return localStorage.getItem(COOKIES_CONSENT_KEY) === COOKIES_CONSENT_ACCEPTED;\n    }\n\n    function isRejected() {\n        return localStorage.getItem(COOKIES_CONSENT_KEY) === COOKIES_CONSENT_REJECTED;\n    }\n\n    return {saveConsent, fetchConsent, clearConsent, rejectConsent, isRejected, isAccepted};\n}\n\nfunction useSearchTerms() {\n    function saveSearchTerm(searchTerm: string) {\n        if (searchTerm && searchTerm.length >= 3) {\n            append<string>(SEARCH_TERMS_KEY, searchTerm);\n        }\n    }\n\n    function fetchSearchTerms(): string[] {\n        return JSON.parse(localStorage.getItem(SEARCH_TERMS_KEY) as string);\n    }\n\n    function clearSearchTerms() {\n        localStorage.removeItem(SEARCH_TERMS_KEY);\n    }\n\n    return {saveSearchTerm, fetchSearchTerms, clearSearchTerms};\n}\n\nfunction useViewersWarning() {\n    function accept() {\n        localStorage.setItem(VIEWERS_WARNING_KEY, VIEWERS_WARNING_ACCEPTED);\n    }\n\n    function reject() {\n        localStorage.setItem(VIEWERS_WARNING_KEY, VIEWERS_WARNING_REJECTED);\n    }\n\n    function isAccepted() {\n        return localStorage.getItem(VIEWERS_WARNING_KEY) === VIEWERS_WARNING_ACCEPTED;\n    }\n\n    return {accept, reject, isAccepted};\n}\n\nexport {useSearchTerms, useCookiesConsent, useViewersWarning};\n","const API_KEY = '84bf9b29bce8db001d1e58dbec8a5770';\nconst FORMAT = 'format=json';\nconst NO_JSONP = 'nojsoncallback=1';\nconst BASE = 'https://api.flickr.com/services/rest/';\n\nconst recentApi =\n    (page: number = 1, perPage: number = 52) =>\n        `${BASE}?method=flickr.photos.getRecent&api_key=${API_KEY}&per_page=${perPage}&page=${page}&${FORMAT}&${NO_JSONP}`;\n\nconst searchApi =\n    (text: string) =>\n        `${BASE}?method=flickr.photos.search&api_key=${API_KEY}&text=${text}&${FORMAT}&${NO_JSONP}`;\n\nexport {recentApi, searchApi};\n","import {Alert, AlertTitle, Button} from \"@material-ui/core\";\nimport {useCookiesConsent} from \"../lib/localStorage.hooks\";\nimport {useState} from \"react\";\n\nfunction CookieConsent() {\n    const {saveConsent, rejectConsent, isRejected, clearConsent, isAccepted} = useCookiesConsent();\n    const [accepted, setAccepted] = useState(isAccepted());\n    const [rejected, setRejected] = useState(isRejected());\n\n    function onAcceptConsent() {\n        if (!isAccepted()) {\n            setAccepted(true);\n            setRejected(false);\n            clearConsent();\n            saveConsent();\n        }\n    }\n\n    function onRejectConsent() {\n        if (!isRejected()) {\n            setAccepted(false);\n            setRejected(true);\n            clearConsent();\n            rejectConsent();\n            window.close();\n        }\n    }\n\n    function onClearConsent() {\n        setRejected(false);\n        setAccepted(false);\n        clearConsent();\n    }\n\n    return <div className=\"cookie-consent-container\">\n        {!accepted &&\n        <div>\n            <Alert severity={rejected ? \"warning\" : \"info\"} variant=\"outlined\">\n                <AlertTitle>Cookies Consent</AlertTitle>\n                We use necessary cookies, localStorage for site to function. â€” <strong>We don't track users or\n                behavior.</strong>\n                <div className=\"button-container\">\n                    <Button variant=\"contained\" color=\"success\" onClick={onAcceptConsent}>Accept</Button>\n                    <Button onClick={onRejectConsent} variant=\"outlined\" color=\"error\">Reject</Button>\n                    <Button onClick={onClearConsent} variant=\"outlined\">Clear consent</Button>\n                </div>\n            </Alert>\n        </div>\n        }\n    </div>;\n}\n\nexport {CookieConsent};\n","import React, {useState} from \"react\";\nimport {Alert, AlertTitle, Button} from \"@material-ui/core\";\nimport {useViewersWarning} from \"../lib/localStorage.hooks\";\n\nfunction ViewersWarning() {\n    const {accept, reject, isAccepted} = useViewersWarning();\n    const [accepted, setAccepted] = useState(isAccepted());\n\n    const handleClose = () => {\n        setAccepted(false);\n        reject();\n        window.close();\n    };\n\n    const handleAccept = () => {\n        setAccepted(true);\n        accept();\n    };\n    return <div className=\"viewers-warning-container\">\n        {!accepted &&\n        <div>\n            <Alert severity=\"error\" variant=\"outlined\">\n                <AlertTitle>Warning: Unfiltered content.</AlertTitle>\n                This application fetches images from public service.<br/>\n                People may choose to upload disturbing content, containing but not limited to:<br/>\n                <strong>sexual, child abuse, self-harm, gore, mutilation etc.</strong>\n                <br/>\n                Continue only if you are okay with this.\n                <div className=\"button-container\">\n                    <Button variant=\"contained\" color=\"success\" onClick={handleAccept}>\n                        I understand. Let me continue to app anyway.\n                    </Button>\n                    <Button variant=\"outlined\" color=\"error\" onClick={handleClose}>\n                        Close the browser tab/window.\n                    </Button>\n                </div>\n            </Alert>\n        </div>\n        }\n    </div>;\n}\n\nexport default ViewersWarning;\n","import React, {useEffect, useState} from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n// import initialData from './photos.data.json';\nimport './styles/App.css';\nimport {GlobalAppState} from \"./lib/app.types\";\nimport {photosToImages} from \"./lib/photo.utils\";\nimport Photos from \"./components/Photos\";\nimport {TopBar} from './components/TopBar';\nimport {useSearchTerms} from \"./lib/localStorage.hooks\";\nimport {recentApi, searchApi} from \"./lib/flickr.apis\";\nimport {FlickrApiResponse} from \"./lib/flickr.types\";\nimport {CircularProgress, debounce} from \"@material-ui/core\";\nimport {CookieConsent} from \"./components/CookieConsent\";\nimport ViewersWarning from \"./components/ViewersWarning\";\nimport {useScroll} from \"./lib/scroll.hooks\";\n\nconst defaultState: GlobalAppState = {\n    isLoading: true,\n    loadingMessage: '',\n    hasError: false,\n    errorMessage: '',\n    error: undefined,\n    recentPhotos: [],\n    searchPhotos: [],\n    isInSearch: false,\n    isInRecent: false,\n    searchTerms: [],\n    currentSearchTerm: '',\n    page: 1,\n    perPage: 52,\n};\n\nfunction App() {\n    const [appState, setAppState] = useState(defaultState);\n    // const photos = photosToImages(initialData.photos.photo);\n    const {saveSearchTerm, fetchSearchTerms} = useSearchTerms();\n    const {scrollTop} = useScroll();\n\n    function fetchRecentFromNetwork(page: number, perPage: number) {\n        fetch(recentApi(page, perPage))\n            .then(res => res.json())\n            .then((data: FlickrApiResponse) => {\n                setAppState(s => ({\n                    ...s,\n                    isLoading: false,\n                    recentPhotos: [...appState.recentPhotos, ...photosToImages(data.photos.photo)],\n                    isInSearch: false,\n                    isInRecent: true,\n                    page: page + 1\n                }));\n            })\n            .catch(e => {\n                setAppState(s => ({\n                    ...s,\n                    error: e,\n                    hasError: true,\n                    isLoading: false,\n                }));\n            });\n    }\n\n    useEffect(() => {\n        // This effect fires only once, when we load due to empty dependency list.\n        fetchRecentFromNetwork(appState.page, appState.perPage);\n        setAppState(state => ({...state, searchTerms: fetchSearchTerms() || []}));\n    }, []);\n\n    useEffect(() => {\n        const st = fetchSearchTerms() || [];\n        setAppState(state => ({...state, searchTerms: st}));\n    }, [appState.isInSearch]);\n\n    useEffect(() => {\n        if (appState.isInRecent) {\n            // debounce(() => fetchRecentFromNetwork(appState.page, appState.perPage), 100);\n            fetchRecentFromNetwork(appState.page, appState.perPage)\n        }\n    }, [scrollTop]);\n\n    function activateSearch(searchTerm: string) {\n        if (searchTerm) {\n            saveSearchTerm(searchTerm);\n            setAppState(state => ({\n                ...state,\n                isLoading: true,\n                isInSearch: true,\n                isInRecent: false,\n                currentSearchTerm: searchTerm\n            }));\n\n            fetch(searchApi(searchTerm))\n                .then(res => res.json())\n                .then((data: FlickrApiResponse) => {\n                    console.log(data);\n                    setAppState(s => ({\n                        ...s,\n                        isLoading: false,\n                        searchPhotos: photosToImages(data.photos.photo),\n                        isInSearch: true,\n                        isInRecent: false\n                    }));\n                })\n                .catch(e => {\n                    setAppState(s => ({\n                        ...s,\n                        error: e,\n                        hasError: true,\n                        isLoading: false\n                    }));\n                });\n        }\n    }\n\n    function deactivateSearch() {\n        setAppState(state => ({...state, isInSearch: false, isInRecent: true}));\n    }\n\n    return (\n        <React.Fragment>\n            <CssBaseline/>\n            <div className=\"App\">\n                <TopBar searchProps={{\n                    isInSearch: appState.isInSearch,\n                    searchTerms: appState.searchTerms,\n                    searchPhotos: appState.searchPhotos,\n                    activateSearch,\n                    deactivateSearch,\n                    currentSearchTerm: appState.currentSearchTerm\n                }}/>\n                <CookieConsent/>\n                <ViewersWarning/>\n                {!appState.isInSearch && appState.isInRecent && <Photos photos={appState.recentPhotos}/>}\n                {appState.isInSearch && !appState.isInRecent && <Photos photos={appState.searchPhotos}/>}\n                {appState.isLoading && <CircularProgress/>}\n            </div>\n        </React.Fragment>\n    );\n}\n\nexport default App;\n","import {useEffect, useState} from \"react\";\nimport {debounce} from \"@material-ui/core\";\n\nfunction useScroll() {\n    const [scrollTop, setScrollTop] = useState(0);\n    const [scrollHeight, setScrollHeight] = useState(document.documentElement.scrollHeight);\n\n\n    useEffect(() => {\n        const onScroll = () => {\n            const st = document.documentElement.scrollTop;\n            const sh = document.documentElement.scrollHeight;\n            setScrollTop(st);\n            setScrollHeight(sh);\n        };\n\n        const debounced = debounce(onScroll, 400)\n        document.addEventListener(\"scroll\", debounced);\n\n        return () => document.removeEventListener(\"scroll\", debounced);\n    }, [scrollTop]);\n\n    return {scrollTop, scrollHeight};\n}\n\nexport {useScroll};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}