(this["webpackJsonpreact-material-app"]=this["webpackJsonpreact-material-app"]||[]).push([[0],{90:function(e,t,c){},91:function(e,t,c){},98:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),o=c(30),a=c.n(o),i=(c(90),c(14)),s=c(16),l=c(11),u=c(147),j=(c(91),"_n"),h="_c";function d(e){return{small:"https://farm".concat(e.farm,".static.flickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret).concat(j,".jpg"),medium:"https://farm".concat(e.farm,".static.flickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret).concat(h,".jpg")}}function b(e){return e.map((function(e){return{url:d(e),alt:e.title,title:"".concat(e.title)}}))}var f=c(157),O=c(154),m=c(145),p=c(150),g=c(155),v=c(156),x=c(2);var S=function(e){var t=e.url;return Object(x.jsx)("div",{onClick:function(e){return e.stopPropagation()},style:{position:"relative"},children:Object(x.jsx)(p.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"modal-modal-title",children:Object(x.jsxs)("div",{style:{textAlign:"center",height:"100%",width:"100%",border:"thick solid white",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",boxShadow:"2px 2px 5px black",color:"white",borderRadius:"4px"},children:[Object(x.jsxs)(g.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:[Object(x.jsx)("div",{style:{backgroundColor:"rgba(32,32,32,0.82)",padding:"0.5rem"},children:e.title}),Object(x.jsx)(v.a,{onClick:e.handleClose,variant:"contained",color:"error",style:{width:"100%"},size:"large",children:"close"})]}),Object(x.jsx)("img",{src:t,alt:"".concat(e.title," at ").concat(t),style:{objectFit:"cover"}})]})})})};var I=function(e){var t=e.photos,c=[t.filter((function(e,t){return t%4===0})),t.filter((function(e,t){return t%4===1})),t.filter((function(e,t){return t%4===2})),t.filter((function(e,t){return t%4===3}))];return Object(x.jsx)(f.a,{sx:{flexGrow:1},children:Object(x.jsx)(O.a,{container:!0,spacing:2,children:c.map((function(e,t){return Object(x.jsx)(O.a,{item:!0,xs:3,children:Object(x.jsx)(m.a,{spacing:2,children:e.map((function(e,t){return Object(x.jsx)(C,{photo:e,index:t})}))},"photos-stack-".concat(t))},"photos-grid-".concat(t))}))})})};function C(e){var t=n.useState(!1),c=Object(l.a)(t,2),r=c[0],o=c[1],a=e.photo,i=e.index;return Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:a.url.small,alt:a.alt,title:"".concat(a.title," at ").concat(a.url.small),style:{width:"100%"},onClick:function(){return o(!0)}}),r&&Object(x.jsx)(S,{open:r,handleClose:function(){return o(!1)},alt:a.alt,url:a.url.medium,title:a.title})]},"image-container-".concat(i))}var k=c(160),w=c(161),y=c(162),T=c(148),_=c(149),E=c(51);function P(e){var t=e.searchTerms.reverse();function c(t,c,n){console.log(t,c,n),"input"===n&&e.activateSearch(c),"clear"===n&&e.deactivateSearch(),"selectOption"===n&&(console.log(c),e.activateSearch(c))}return Object(x.jsx)(T.a,{disablePortal:!0,className:"search-autocomplete",id:"search-bar-input",options:t,sx:{width:400},renderInput:function(e){return Object(x.jsx)(_.a,Object(s.a)(Object(s.a)({},e),{},{label:"Search"}))},onInputChange:Object(E.a)(c,400),noOptionsText:"",onChange:function(e,t,n){return c(e,t,n)},selectOnFocus:!0})}function R(e){return Object(x.jsx)(f.a,{sx:{flexGrow:1},className:"topbar-box",children:Object(x.jsx)(k.a,{position:"fixed",children:Object(x.jsxs)(w.a,{children:[Object(x.jsx)(g.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(x.jsx)(y.a,{href:"/infinite-scroll",underline:"none",color:"white",children:"Infinite Scroll"})}),Object(x.jsx)(P,Object(s.a)({},e.searchProps))]})})})}var N="SEARCH_TERMS",L="COOKIES_CONSENT",A="cookie_consent_accepted",F="cookie_consent_rejected",J="VIEWERS_WARNING",W="viewers_warning_accepted";function G(){if("undefined"===typeof localStorage)return!1;try{return localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test")&&(localStorage.removeItem("feature_test"),!0)}catch(e){return!1}}function H(e,t){if(G())if(function(e){if(G())return null!==localStorage.getItem(e)}(e)){var c=JSON.parse(localStorage.getItem(e));c.includes(t)?c=[].concat(Object(i.a)(c.slice(0,c.indexOf(t))),Object(i.a)(c.slice(c.indexOf(t)+1)),[t]):c.push(t),localStorage.setItem(e,JSON.stringify(c))}else{var n=[t];localStorage.setItem(e,JSON.stringify(n))}}var M="84bf9b29bce8db001d1e58dbec8a5770",B="format=json",z="nojsoncallback=1",D="https://api.flickr.com/services/rest/",K=c(164),U=c(152),V=c(163);function q(){var e={saveConsent:function(){localStorage.setItem(L,A)},fetchConsent:function(){return localStorage.getItem(L)},clearConsent:function(){localStorage.removeItem(L)},rejectConsent:function(){localStorage.setItem(L,F)},isRejected:function(){return localStorage.getItem(L)===F},isAccepted:function(){return localStorage.getItem(L)===A}},t=e.saveConsent,c=e.rejectConsent,r=e.isRejected,o=e.clearConsent,a=e.isAccepted,i=Object(n.useState)(a()),s=Object(l.a)(i,2),u=s[0],j=s[1],h=Object(n.useState)(r()),d=Object(l.a)(h,2),b=d[0],f=d[1];return Object(x.jsx)("div",{className:"cookie-consent-container",children:!u&&Object(x.jsx)("div",{children:Object(x.jsxs)(U.a,{severity:b?"warning":"info",variant:"outlined",children:[Object(x.jsx)(V.a,{children:"Cookies Consent"}),"We use necessary cookies, localStorage for site to function. \u2014 ",Object(x.jsx)("strong",{children:"We don't track users or behavior."}),Object(x.jsxs)("div",{className:"button-container",children:[Object(x.jsx)(v.a,{variant:"contained",color:"success",onClick:function(){a()||(j(!0),f(!1),o(),t())},children:"Accept"}),Object(x.jsx)(v.a,{onClick:function(){r()||(j(!1),f(!0),o(),c(),window.close())},variant:"outlined",color:"error",children:"Reject"}),Object(x.jsx)(v.a,{onClick:function(){f(!1),j(!1),o()},variant:"outlined",children:"Clear consent"})]})]})})})}var Q=function(){var e={accept:function(){localStorage.setItem(J,W)},reject:function(){localStorage.setItem(J,"viewers_warning_rejected")},isAccepted:function(){return localStorage.getItem(J)===W}},t=e.accept,c=e.reject,r=e.isAccepted,o=Object(n.useState)(r()),a=Object(l.a)(o,2),i=a[0],s=a[1];return Object(x.jsx)("div",{className:"viewers-warning-container",children:!i&&Object(x.jsx)("div",{children:Object(x.jsxs)(U.a,{severity:"error",variant:"outlined",children:[Object(x.jsx)(V.a,{children:"Warning: Unfiltered content."}),"This application fetches images from public service.",Object(x.jsx)("br",{}),"People may choose to upload disturbing content, containing but not limited to:",Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"sexual, child abuse, self-harm, gore, mutilation etc."}),Object(x.jsx)("br",{}),"Continue only if you are okay with this.",Object(x.jsxs)("div",{className:"button-container",children:[Object(x.jsx)(v.a,{variant:"contained",color:"success",onClick:function(){s(!0),t()},children:"I understand. Let me continue to app anyway."}),Object(x.jsx)(v.a,{variant:"outlined",color:"error",onClick:function(){s(!1),c(),window.close()},children:"Close the browser tab/window."})]})]})})})};var X={isLoading:!0,loadingMessage:"",hasError:!1,errorMessage:"",error:void 0,recentPhotos:[],searchPhotos:[],isInSearch:!1,isInRecent:!1,searchTerms:[],currentSearchTerm:"",page:1,perPage:52};var Y=function(){var e=Object(n.useState)(X),t=Object(l.a)(e,2),c=t[0],o=t[1],a={saveSearchTerm:function(e){e&&e.length>=3&&H(N,e)},fetchSearchTerms:function(){return JSON.parse(localStorage.getItem(N))},clearSearchTerms:function(){localStorage.removeItem(N)}},j=a.saveSearchTerm,h=a.fetchSearchTerms,d=function(){var e=Object(n.useState)(0),t=Object(l.a)(e,2),c=t[0],r=t[1],o=Object(n.useState)(document.documentElement.scrollHeight),a=Object(l.a)(o,2),i=a[0],s=a[1];return Object(n.useEffect)((function(){var e=Object(E.a)((function(){var e=document.documentElement.scrollTop,t=document.documentElement.scrollHeight;r(e),s(t)}),400);return document.addEventListener("scroll",e),function(){return document.removeEventListener("scroll",e)}}),[c]),{scrollTop:c,scrollHeight:i}}().scrollTop;function f(e,t){fetch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:52;return"".concat(D,"?method=flickr.photos.getRecent&api_key=").concat(M,"&per_page=").concat(t,"&page=").concat(e,"&").concat(B,"&").concat(z)}(e,t)).then((function(e){return e.json()})).then((function(t){o((function(n){return Object(s.a)(Object(s.a)({},n),{},{isLoading:!1,recentPhotos:[].concat(Object(i.a)(c.recentPhotos),Object(i.a)(b(t.photos.photo))),isInSearch:!1,isInRecent:!0,page:e+1})}))})).catch((function(e){o((function(t){return Object(s.a)(Object(s.a)({},t),{},{error:e,hasError:!0,isLoading:!1})}))}))}return Object(n.useEffect)((function(){f(c.page,c.perPage),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchTerms:h()||[]})}))}),[]),Object(n.useEffect)((function(){var e=h()||[];o((function(t){return Object(s.a)(Object(s.a)({},t),{},{searchTerms:e})}))}),[c.isInSearch]),Object(n.useEffect)((function(){c.isInRecent&&f(c.page,c.perPage)}),[d]),Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsx)(u.a,{}),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(R,{searchProps:{isInSearch:c.isInSearch,searchTerms:c.searchTerms,searchPhotos:c.searchPhotos,activateSearch:function(e){var t;e&&(j(e),o((function(t){return Object(s.a)(Object(s.a)({},t),{},{isLoading:!0,isInSearch:!0,isInRecent:!1,currentSearchTerm:e})})),fetch((t=e,"".concat(D,"?method=flickr.photos.search&api_key=").concat(M,"&text=").concat(t,"&").concat(B,"&").concat(z))).then((function(e){return e.json()})).then((function(e){console.log(e),o((function(t){return Object(s.a)(Object(s.a)({},t),{},{isLoading:!1,searchPhotos:b(e.photos.photo),isInSearch:!0,isInRecent:!1})}))})).catch((function(e){o((function(t){return Object(s.a)(Object(s.a)({},t),{},{error:e,hasError:!0,isLoading:!1})}))})))},deactivateSearch:function(){o((function(e){return Object(s.a)(Object(s.a)({},e),{},{isInSearch:!1,isInRecent:!0})}))},currentSearchTerm:c.currentSearchTerm}}),Object(x.jsx)(q,{}),Object(x.jsx)(Q,{}),!c.isInSearch&&c.isInRecent&&Object(x.jsx)(I,{photos:c.recentPhotos}),c.isInSearch&&!c.isInRecent&&Object(x.jsx)(I,{photos:c.searchPhotos}),c.isLoading&&Object(x.jsx)(K.a,{})]})]})},Z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,166)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),o(e),a(e)}))};a.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[98,1,2]]]);
//# sourceMappingURL=main.4f3f1bf0.chunk.js.map