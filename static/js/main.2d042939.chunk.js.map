{"version":3,"sources":["lib/photo.utils.ts","components/Photos.tsx","components/SearchBar.tsx","components/TopBar.tsx","lib/localStorage.hooks.tsx","lib/flickr.apis.ts","components/CookieConsent.tsx","components/ViewersWarning.tsx","App.tsx","lib/scroll.hooks.tsx","reportWebVitals.ts","index.tsx"],"names":["PHOTO_SIZE","makeUrl","photo","small","farm","server","id","secret","medium","photosToImages","photos","map","p","url","alt","title","ImageContainer","styled","Paper","theme","typography","body2","padding","spacing","textAlign","color","palette","text","secondary","Photos","props","stacks","filter","_","i","Box","sx","flexGrow","Grid","container","images","stackIndex","item","xs","Stack","index","src","style","width","SearchBar","searchTerms","reverse","handleInputChange","e","v","r","console","log","activateSearch","deactivateSearch","Autocomplete","disablePortal","className","options","renderInput","params","TextField","label","onInputChange","debounce","noOptionsText","onChange","selectOnFocus","TopBar","AppBar","position","Toolbar","Typography","variant","component","Link","href","underline","searchProps","SEARCH_TERMS_KEY","COOKIES_CONSENT_KEY","COOKIES_CONSENT_ACCEPTED","COOKIES_CONSENT_REJECTED","VIEWERS_WARNING_KEY","VIEWERS_WARNING_ACCEPTED","featureAvailable","localStorage","setItem","getItem","removeItem","append","key","value","exists","values","JSON","parse","includes","slice","indexOf","push","stringify","API_KEY","FORMAT","NO_JSONP","BASE","CookieConsent","saveConsent","fetchConsent","clearConsent","rejectConsent","isRejected","isAccepted","useState","accepted","setAccepted","rejected","setRejected","Alert","severity","AlertTitle","Button","onClick","window","close","ViewersWarning","accept","reject","defaultState","isLoading","loadingMessage","hasError","errorMessage","error","undefined","recentPhotos","searchPhotos","isInSearch","isInRecent","currentSearchTerm","page","perPage","App","appState","setAppState","saveSearchTerm","searchTerm","length","fetchSearchTerms","clearSearchTerms","scrollTop","setScrollTop","document","documentElement","scrollHeight","setScrollHeight","useEffect","debounced","st","sh","addEventListener","removeEventListener","useScroll","fetchRecentFromNetwork","fetch","recentApi","then","res","json","data","s","catch","state","Fragment","CssBaseline","CircularProgress","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"8PAIMA,G,MAKQ,MALRA,EASS,KAOf,SAASC,EAAQC,GACb,MAAO,CACHC,MAAM,eAAD,OAAiBD,EAAME,KAAvB,8BAAiDF,EAAMG,OAAvD,YAAiEH,EAAMI,GAAvE,YAA6EJ,EAAMK,QAAnF,OAA4FP,EAA5F,QACLQ,OAAO,eAAD,OAAiBN,EAAME,KAAvB,8BAAiDF,EAAMG,OAAvD,YAAiEH,EAAMI,GAAvE,YAA6EJ,EAAMK,QAAnF,OAA4FP,EAA5F,SAId,SAASS,EAAeC,GACpB,OAAOA,EAAOC,KAAI,SAACC,GAIf,MAAO,CAACC,IAHIZ,EAAQW,GAGPE,IAFDF,EAAEG,MAEIA,MADP,UAAMH,EAAEG,W,sDCvBrBC,EAAiBC,YAAOC,IAAPD,EAAc,gBAAEE,EAAF,EAAEA,MAAF,mBAAC,eAC/BA,EAAMC,WAAWC,OADa,IAEjCC,QAASH,EAAMI,QAAQ,GACvBC,UAAW,SACXC,MAAON,EAAMO,QAAQC,KAAKC,eAuCfC,MAnCf,SAAgBC,GACZ,IAAOpB,EAAUoB,EAAVpB,OACDqB,EAAS,CACXrB,EAAOsB,QAAO,SAACC,EAAGC,GAAJ,OAAkBA,EAAI,IAAM,KAC1CxB,EAAOsB,QAAO,SAACC,EAAGC,GAAJ,OAAkBA,EAAI,IAAM,KAC1CxB,EAAOsB,QAAO,SAACC,EAAGC,GAAJ,OAAkBA,EAAI,IAAM,KAC1CxB,EAAOsB,QAAO,SAACC,EAAGC,GAAJ,OAAkBA,EAAI,IAAM,MAE9C,OACI,cAACC,EAAA,EAAD,CAAKC,GAAI,CAACC,SAAU,GAApB,SACI,cAACC,EAAA,EAAD,CAAMC,WAAS,EAAChB,QAAS,EAAzB,SACKQ,EAAOpB,KAAI,SAAC6B,EAAiBC,GAC1B,OACI,cAACH,EAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,EAAf,SACI,cAACC,EAAA,EAAD,CAAOrB,QAAS,EAAhB,SACKiB,EAAO7B,KAAI,SAACT,EAAc2C,GACvB,OACI,cAAC7B,EAAD,UACI,qBAAK8B,IAAK5C,EAAMW,IAAIV,MACfW,IAAKZ,EAAMY,IACXC,MAAK,UAAKb,EAAMa,MAAX,eAAuBb,EAAMW,IAAIV,OACtC4C,MAAO,CAACC,MAAO,WAJxB,0BAAwCH,QAHpD,uBAAwCJ,KAD5C,sBAAsCA,Y,8DClB9D,SAASQ,EAAUnB,GACf,IAAMoB,EAAcpB,EAAMoB,YAAYC,UAEtC,SAASC,EAAkBC,EAAmBC,EAAWC,GACrDC,QAAQC,IAAIJ,EAAGC,EAAGC,GACR,UAANA,GACAzB,EAAM4B,eAAeJ,GAEf,UAANC,GACAzB,EAAM6B,mBAEA,iBAANJ,IACAC,QAAQC,IAAIH,GACZxB,EAAM4B,eAAeJ,IAS7B,OACI,cAACM,EAAA,EAAD,CACIC,eAAe,EACfC,UAAW,sBACXxD,GAAG,mBACHyD,QAASb,EACTd,GAAI,CAACY,MAAO,KACZgB,YAAa,SAACC,GAAD,OAAY,cAACC,EAAA,EAAD,2BAAeD,GAAf,IAAuBE,MAAM,aACtDC,cAAeC,YAASjB,EAAmB,KAE3CkB,cAAe,GACfC,SAAU,SAAClB,EAAGC,EAAGC,GAAP,OAAaH,EAAkBC,EAAGC,EAAaC,IACzDiB,eAAe,ICzC3B,SAASC,EAAO3C,GACZ,OACI,cAACK,EAAA,EAAD,CAAKC,GAAI,CAACC,SAAU,GAAIyB,UAAW,aAAnC,SACI,cAACY,EAAA,EAAD,CAAQC,SAAS,QAAjB,SACI,eAACC,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAYC,QAAQ,KAAKC,UAAU,MAAM3C,GAAI,CAACC,SAAU,GAAxD,SACI,cAAC2C,EAAA,EAAD,CAAMC,KAAK,IAAIC,UAAU,OAAOzD,MAAO,QAAvC,sBAIJ,cAACwB,EAAD,eAAenB,EAAMqD,qBCdzC,IAAMC,EAAmB,eACnBC,EAAsB,kBACtBC,EAA2B,0BAC3BC,EAA2B,0BAE3BC,EAAsB,kBACtBC,EAA2B,2BAIjC,SAASC,IACL,GAA4B,qBAAjBC,aAiBP,OAAO,EAhBP,IAEI,OADAA,aAAaC,QAAQ,eAAgB,OACQ,QAAzCD,aAAaE,QAAQ,kBACrBF,aAAaG,WAAW,iBAEjB,GAKb,MAAOzC,GAEL,OAAO,GAcnB,SAAS0C,EAAUC,EAAaC,GAC5B,GAAIP,IACA,GARR,SAAgBM,GACZ,GAAIN,IACA,OAAqC,OAA9BC,aAAaE,QAAQG,GAMxBE,CAAOF,GAAM,CACb,IAAIG,EAASC,KAAKC,MAAMV,aAAaE,QAAQG,IACxCG,EAAOG,SAASL,GAGjBE,EAAM,sBAAOA,EAAOI,MAAM,EAAGJ,EAAOK,QAAQP,KAAtC,YAAkDE,EAAOI,MAAMJ,EAAOK,QAAQP,GAAS,IAAvF,CAA2FA,IAFjGE,EAAOM,KAAKR,GAIhBN,aAAaC,QAAQI,EAAKI,KAAKM,UAAUP,QACtC,CACH,IAAMA,EAAS,CAACF,GAChBN,aAAaC,QAAQI,EAAKI,KAAKM,UAAUP,KClDrD,IAAMQ,EAAU,mCACVC,EAAS,cACTC,EAAW,mBACXC,EAAO,wC,oCCCb,SAASC,IACL,MF2EO,CAACC,YAxBR,WACIrB,aAAaC,QAAQP,EAAqBC,IAuBzB2B,aApBrB,WACI,OAAOtB,aAAaE,QAAQR,IAmBG6B,aAZnC,WACIvB,aAAaG,WAAWT,IAWqB8B,cAhBjD,WACIxB,aAAaC,QAAQP,EAAqBE,IAekB6B,WAJhE,WACI,OAAOzB,aAAaE,QAAQR,KAAyBE,GAGmB8B,WAR5E,WACI,OAAO1B,aAAaE,QAAQR,KAAyBC,IEpElD0B,EAAP,EAAOA,YAAaG,EAApB,EAAoBA,cAAeC,EAAnC,EAAmCA,WAAYF,EAA/C,EAA+CA,aAAcG,EAA7D,EAA6DA,WAC7D,EAAgCC,mBAASD,KAAzC,mBAAOE,EAAP,KAAiBC,EAAjB,KACA,EAAgCF,mBAASF,KAAzC,mBAAOK,EAAP,KAAiBC,EAAjB,KA2BA,OAAO,qBAAK5D,UAAU,2BAAf,UACDyD,GACF,8BACI,eAACI,EAAA,EAAD,CAAOC,SAAUH,EAAW,UAAY,OAAQ3C,QAAQ,WAAxD,UACI,cAAC+C,EAAA,EAAD,8BADJ,uEAEmE,uEAE/D,sBAAK/D,UAAU,mBAAf,UACI,cAACgE,EAAA,EAAD,CAAQhD,QAAQ,YAAYrD,MAAM,UAAUsG,QAjC5D,WACSV,MACDG,GAAY,GACZE,GAAY,GACZR,IACAF,MA4BQ,oBACA,cAACc,EAAA,EAAD,CAAQC,QAzBxB,WACSX,MACDI,GAAY,GACZE,GAAY,GACZR,IACAC,IACAa,OAAOC,UAmBmCnD,QAAQ,WAAWrD,MAAM,QAA3D,oBACA,cAACqG,EAAA,EAAD,CAAQC,QAhBxB,WACIL,GAAY,GACZF,GAAY,GACZN,KAa6CpC,QAAQ,WAAzC,qCCFLoD,MAtCf,WACI,MH6GO,CAACC,OAZR,WACIxC,aAAaC,QAAQJ,EAAqBC,IAW9B2C,OARhB,WACIzC,aAAaC,QAAQJ,EApGI,6BA2GL6B,WAJxB,WACI,OAAO1B,aAAaE,QAAQL,KAAyBC,IG1GlD0C,EAAP,EAAOA,OAAQC,EAAf,EAAeA,OAAQf,EAAvB,EAAuBA,WACvB,EAAgCC,mBAASD,KAAzC,mBAAOE,EAAP,KAAiBC,EAAjB,KAYA,OAAO,qBAAK1D,UAAU,4BAAf,UACDyD,GACF,8BACI,eAACI,EAAA,EAAD,CAAOC,SAAS,QAAQ9C,QAAQ,WAAhC,UACI,cAAC+C,EAAA,EAAD,2CADJ,uDAEwD,uBAFxD,iFAGkF,uBAC9E,2FACA,uBALJ,2CAOI,sBAAK/D,UAAU,mBAAf,UACI,cAACgE,EAAA,EAAD,CAAQhD,QAAQ,YAAYrD,MAAM,UAAUsG,QAfvC,WACjBP,GAAY,GACZW,KAaY,0DAGA,cAACL,EAAA,EAAD,CAAQhD,QAAQ,WAAWrD,MAAM,QAAQsG,QAxBrC,WAChBP,GAAY,GACZY,IACAJ,OAAOC,SAqBK,sDChBpB,IAAMI,EAA+B,CACjCC,WAAW,EACXC,eAAgB,GAChBC,UAAU,EACVC,aAAc,GACdC,WAAOC,EACPC,aAAc,GACdC,aAAc,GACdC,YAAY,EACZC,YAAY,EACZ7F,YAAa,GACb8F,kBAAmB,GACnBC,KAAM,EACNC,QAAS,IA8GEC,MA3Gf,WACI,MAAgC7B,mBAASe,GAAzC,mBAAOe,EAAP,KAAiBC,EAAjB,KAEA,EJ+DO,CAACC,eAdR,SAAwBC,GAChBA,GAAcA,EAAWC,QAAU,GACnCzD,EAAeX,EAAkBmE,IAYjBE,iBARxB,WACI,OAAOrD,KAAKC,MAAMV,aAAaE,QAAQT,KAODsE,iBAJ1C,WACI/D,aAAaG,WAAWV,KI5DrBkE,EAAP,EAAOA,eAAgBG,EAAvB,EAAuBA,iBAChBE,ECjCX,WACI,MAAkCrC,mBAAS,GAA3C,mBAAOqC,EAAP,KAAkBC,EAAlB,KACA,EAAwCtC,mBAASuC,SAASC,gBAAgBC,cAA1E,mBAAOA,EAAP,KAAqBC,EAArB,KAiBA,OAdAC,qBAAU,WACN,IAOMC,EAAY7F,aAPD,WACb,IAAM8F,EAAKN,SAASC,gBAAgBH,UAC9BS,EAAKP,SAASC,gBAAgBC,aACpCH,EAAaO,GACbH,EAAgBI,KAGiB,KAGrC,OAFAP,SAASQ,iBAAiB,SAAUH,GAE7B,kBAAML,SAASS,oBAAoB,SAAUJ,MACrD,CAACP,IAEG,CAACA,YAAWI,gBDcCQ,GAAbZ,UAEP,SAASa,EAAuBvB,EAAcC,GAC1CuB,MHjCJ,eAACxB,EAAD,uDAAgB,EAAGC,EAAnB,uDAAqC,GAArC,gBACOpC,EADP,mDACsDH,EADtD,qBAC0EuC,EAD1E,iBAC0FD,EAD1F,YACkGrC,EADlG,YAC4GC,GGgClG6D,CAAUzB,EAAMC,IACjByB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAACG,GACHzB,GAAY,SAAA0B,GAAC,kCACNA,GADM,IAETzC,WAAW,EACXM,aAAa,GAAD,mBAAMQ,EAASR,cAAf,YAAgCnI,EAAeqK,EAAKpK,OAAOR,SACvE4I,YAAY,EACZC,YAAY,EACZE,KAAMA,EAAO,UAGpB+B,OAAM,SAAA3H,GACHgG,GAAY,SAAA0B,GAAC,kCACNA,GADM,IAETrC,MAAOrF,EACPmF,UAAU,EACVF,WAAW,UA6D3B,OAxDA2B,qBAAU,WAENO,EAAuBpB,EAASH,KAAMG,EAASF,SAC/CG,GAAY,SAAA4B,GAAK,kCAASA,GAAT,IAAgB/H,YAAauG,KAAsB,UACrE,IAEHQ,qBAAU,WACN,IAAME,EAAKV,KAAsB,GACjCJ,GAAY,SAAA4B,GAAK,kCAASA,GAAT,IAAgB/H,YAAaiH,SAC/C,CAACf,EAASN,aAEbmB,qBAAU,WACFb,EAASL,YAETyB,EAAuBpB,EAASH,KAAMG,EAASF,WAEpD,CAACS,IAyCA,eAAC,IAAMuB,SAAP,WACI,cAACC,EAAA,EAAD,IACA,sBAAKrH,UAAU,MAAf,UACI,cAACW,EAAD,CAAQU,YAAa,CACjB2D,WAAYM,EAASN,WACrB5F,YAAakG,EAASlG,YACtB2F,aAAcO,EAASP,aACvBnF,eA9ChB,SAAwB6F,GHrExB,IAAC5H,EGsEO4H,IACAD,EAAeC,GACfF,GAAY,SAAA4B,GAAK,kCACVA,GADU,IAEb3C,WAAW,EACXQ,YAAY,EACZC,YAAY,EACZC,kBAAmBO,OAGvBkB,OHhFP9I,EGgFuB4H,EHhFxB,UACOzC,EADP,gDACmDH,EADnD,iBACmEhF,EADnE,YAC2EiF,EAD3E,YACqFC,KGgFxE8D,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAACG,GACHtH,QAAQC,IAAIqH,GACZzB,GAAY,SAAA0B,GAAC,kCACNA,GADM,IAETzC,WAAW,EACXO,aAAcpI,EAAeqK,EAAKpK,OAAOR,OACzC4I,YAAY,EACZC,YAAY,UAGnBiC,OAAM,SAAA3H,GACHgG,GAAY,SAAA0B,GAAC,kCACNA,GADM,IAETrC,MAAOrF,EACPmF,UAAU,EACVF,WAAW,YAmBf3E,iBAbhB,WACI0F,GAAY,SAAA4B,GAAK,kCAASA,GAAT,IAAgBnC,YAAY,EAAOC,YAAY,QAapDC,kBAAmBI,EAASJ,qBAEhC,cAACjC,EAAD,IACA,cAAC,EAAD,KACEqC,EAASN,YAAcM,EAASL,YAAc,cAAC,EAAD,CAAQrI,OAAQ0I,EAASR,eACxEQ,EAASN,aAAeM,EAASL,YAAc,cAAC,EAAD,CAAQrI,OAAQ0I,EAASP,eACxEO,EAASd,WAAa,cAAC8C,EAAA,EAAD,WEvHxBC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBZ,MAAK,YAAkD,IAA/Ca,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFlC,SAASmC,eAAe,SAM1BX,M","file":"static/js/main.2d042939.chunk.js","sourcesContent":["import {FlickrPhoto} from \"./flickr.types\";\nimport {Image, ImageURLs} from \"./app.types\";\n\n\nconst PHOTO_SIZE = {\n    thumbnail75: '_s',\n    thumbnail150: '_q',\n    thumbnail100: '_t',\n    small240: '_m',\n    small320: '_n',\n    small400: '_w',\n    medium500: '',\n    medium640: '_z',\n    medium800: '_c'\n};\n\nfunction photosToUrls(photos: FlickrPhoto[]): ImageURLs[] {\n    return photos.map(makeUrl);\n}\n\nfunction makeUrl(photo: FlickrPhoto): ImageURLs {\n    return {\n        small: `https://farm${photo.farm}.static.flickr.com/${photo.server}/${photo.id}_${photo.secret}${PHOTO_SIZE.small320}.jpg`,\n        medium: `https://farm${photo.farm}.static.flickr.com/${photo.server}/${photo.id}_${photo.secret}${PHOTO_SIZE.medium800}.jpg`\n    };\n}\n\nfunction photosToImages(photos: FlickrPhoto[]): Image[] {\n    return photos.map((p: FlickrPhoto) => {\n        const url = makeUrl(p);\n        const alt = p.title;\n        const title = `${p.title}`;\n        return {url, alt, title};\n    });\n}\n\nfunction _nTo_z(url: string): string {\n    return url.replace('_n', '_z');\n}\n\nexport {makeUrl, photosToUrls, photosToImages, _nTo_z};\n","import * as React from 'react';\nimport {styled} from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport {Image, PhotosProps} from '../lib/app.types';\nimport {Stack} from '@material-ui/core';\n\nconst ImageContainer = styled(Paper)(({theme}) => ({\n    ...theme.typography.body2,\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n\n}));\n\nfunction Photos(props: PhotosProps) {\n    const {photos} = props;\n    const stacks = [\n        photos.filter((_, i: number) => i % 4 === 0),\n        photos.filter((_, i: number) => i % 4 === 1),\n        photos.filter((_, i: number) => i % 4 === 2),\n        photos.filter((_, i: number) => i % 4 === 3),\n    ];\n    return (\n        <Box sx={{flexGrow: 1}}>\n            <Grid container spacing={2}>\n                {stacks.map((images: Image[], stackIndex: number) => {\n                    return (\n                        <Grid item xs={3} key={`photos-grid-${stackIndex}`}>\n                            <Stack spacing={2} key={`photos-stack-${stackIndex}`}>\n                                {images.map((photo: Image, index: number) => {\n                                    return (\n                                        <ImageContainer key={`image-container-${index}`}>\n                                            <img src={photo.url.small}\n                                                 alt={photo.alt}\n                                                 title={`${photo.title} at ${photo.url.small}`}\n                                                 style={{width: '100%'}}\n                                            />\n                                        </ImageContainer>\n                                    );\n                                })}\n                            </Stack>\n                        </Grid>\n                    );\n                })}\n            </Grid>\n        </Box>\n    );\n}\n\nexport default Photos;\n","import {\n    Autocomplete,\n    AutocompleteChangeReason,\n    AutocompleteCloseReason,\n    AutocompleteInputChangeReason,\n    debounce,\n    TextField\n} from \"@material-ui/core\";\nimport {SearchBarProps} from \"../lib/app.types\";\nimport {SyntheticEvent} from \"react\";\n\nfunction SearchBar(props: SearchBarProps) {\n    const searchTerms = props.searchTerms.reverse();\n\n    function handleInputChange(e: SyntheticEvent, v: string, r: AutocompleteInputChangeReason | AutocompleteChangeReason) {\n        console.log(e, v, r);\n        if (r === 'input') {\n            props.activateSearch(v);\n        }\n        if (r === 'clear') {\n            props.deactivateSearch();\n        }\n        if (r === 'selectOption') {\n            console.log(v);\n            props.activateSearch(v);\n        }\n    }\n\n    function handleClose(e: SyntheticEvent<Element, Event>, r: AutocompleteCloseReason) {\n        console.log('closed');\n        props.deactivateSearch();\n    }\n\n    return (\n        <Autocomplete\n            disablePortal={true}\n            className={\"search-autocomplete\"}\n            id=\"search-bar-input\"\n            options={searchTerms}\n            sx={{width: 400}}\n            renderInput={(params) => <TextField {...params} label=\"Search\"/>}\n            onInputChange={debounce(handleInputChange, 400)}\n            // onClose={handleClose}\n            noOptionsText={''}\n            onChange={(e, v, r) => handleInputChange(e, v as string, r)}\n            selectOnFocus={true}\n        />\n    );\n}\n\nexport {SearchBar};\n","import {AppBar, Box, Link, Toolbar, Typography} from \"@material-ui/core\";\nimport {SearchBar} from \"./SearchBar\";\nimport {TopBarProps} from \"../lib/app.types\";\n\nfunction TopBar(props: TopBarProps) {\n    return (\n        <Box sx={{flexGrow: 1}} className={'topbar-box'}>\n            <AppBar position=\"fixed\">\n                <Toolbar>\n                    <Typography variant=\"h6\" component=\"div\" sx={{flexGrow: 1}}>\n                        <Link href=\"/\" underline=\"none\" color={\"white\"}>\n                            Slickr\n                        </Link>\n                    </Typography>\n                    <SearchBar {...props.searchProps}/>\n                </Toolbar>\n            </AppBar>\n        </Box>\n    );\n}\n\nexport {TopBar};\n","const SEARCH_TERMS_KEY = 'SEARCH_TERMS';\nconst COOKIES_CONSENT_KEY = 'COOKIES_CONSENT';\nconst COOKIES_CONSENT_ACCEPTED = 'cookie_consent_accepted';\nconst COOKIES_CONSENT_REJECTED = 'cookie_consent_rejected';\n\nconst VIEWERS_WARNING_KEY = 'VIEWERS_WARNING';\nconst VIEWERS_WARNING_ACCEPTED = 'viewers_warning_accepted';\nconst VIEWERS_WARNING_REJECTED = 'viewers_warning_rejected';\n\n\nfunction featureAvailable() {\n    if (typeof localStorage !== 'undefined') {\n        try {\n            localStorage.setItem('feature_test', 'yes');\n            if (localStorage.getItem('feature_test') === 'yes') {\n                localStorage.removeItem('feature_test');\n                // localStorage is enabled\n                return true;\n            } else {\n                // localStorage is disabled\n                return false;\n            }\n        } catch (e) {\n            // localStorage is disabled\n            return false;\n        }\n    } else {\n        // localStorage is not available\n        return false;\n    }\n}\n\nfunction exists(key: string) {\n    if (featureAvailable()) {\n        return localStorage.getItem(key) !== null;\n    }\n}\n\nfunction append<T>(key: string, value: T) {\n    if (featureAvailable()) {\n        if (exists(key)) {\n            let values = JSON.parse(localStorage.getItem(key) as string);\n            if (!values.includes(value)) {\n                values.push(value);\n            } else {\n                values = [...values.slice(0, values.indexOf(value)), ...values.slice(values.indexOf(value) + 1), value];\n            }\n            localStorage.setItem(key, JSON.stringify(values));\n        } else {\n            const values = [value];\n            localStorage.setItem(key, JSON.stringify(values));\n        }\n    }\n}\n\nfunction useCookiesConsent() {\n    function saveConsent() {\n        localStorage.setItem(COOKIES_CONSENT_KEY, COOKIES_CONSENT_ACCEPTED);\n    }\n\n    function fetchConsent() {\n        return localStorage.getItem(COOKIES_CONSENT_KEY);\n    }\n\n    function rejectConsent() {\n        localStorage.setItem(COOKIES_CONSENT_KEY, COOKIES_CONSENT_REJECTED);\n    }\n\n    function clearConsent() {\n        localStorage.removeItem(COOKIES_CONSENT_KEY);\n    }\n\n    function isAccepted() {\n        return localStorage.getItem(COOKIES_CONSENT_KEY) === COOKIES_CONSENT_ACCEPTED;\n    }\n\n    function isRejected() {\n        return localStorage.getItem(COOKIES_CONSENT_KEY) === COOKIES_CONSENT_REJECTED;\n    }\n\n    return {saveConsent, fetchConsent, clearConsent, rejectConsent, isRejected, isAccepted};\n}\n\nfunction useSearchTerms() {\n    function saveSearchTerm(searchTerm: string) {\n        if (searchTerm && searchTerm.length >= 3) {\n            append<string>(SEARCH_TERMS_KEY, searchTerm);\n        }\n    }\n\n    function fetchSearchTerms(): string[] {\n        return JSON.parse(localStorage.getItem(SEARCH_TERMS_KEY) as string);\n    }\n\n    function clearSearchTerms() {\n        localStorage.removeItem(SEARCH_TERMS_KEY);\n    }\n\n    return {saveSearchTerm, fetchSearchTerms, clearSearchTerms};\n}\n\nfunction useViewersWarning() {\n    function accept() {\n        localStorage.setItem(VIEWERS_WARNING_KEY, VIEWERS_WARNING_ACCEPTED);\n    }\n\n    function reject() {\n        localStorage.setItem(VIEWERS_WARNING_KEY, VIEWERS_WARNING_REJECTED);\n    }\n\n    function isAccepted() {\n        return localStorage.getItem(VIEWERS_WARNING_KEY) === VIEWERS_WARNING_ACCEPTED;\n    }\n\n    return {accept, reject, isAccepted};\n}\n\nexport {useSearchTerms, useCookiesConsent, useViewersWarning};\n","const API_KEY = '84bf9b29bce8db001d1e58dbec8a5770';\nconst FORMAT = 'format=json';\nconst NO_JSONP = 'nojsoncallback=1';\nconst BASE = 'https://api.flickr.com/services/rest/';\n\nconst recentApi =\n    (page: number = 1, perPage: number = 52) =>\n        `${BASE}?method=flickr.photos.getRecent&api_key=${API_KEY}&per_page=${perPage}&page=${page}&${FORMAT}&${NO_JSONP}`;\n\nconst searchApi =\n    (text: string) =>\n        `${BASE}?method=flickr.photos.search&api_key=${API_KEY}&text=${text}&${FORMAT}&${NO_JSONP}`;\n\nexport {recentApi, searchApi};\n","import {Alert, AlertTitle, Button} from \"@material-ui/core\";\nimport {useCookiesConsent} from \"../lib/localStorage.hooks\";\nimport {useState} from \"react\";\n\nfunction CookieConsent() {\n    const {saveConsent, rejectConsent, isRejected, clearConsent, isAccepted} = useCookiesConsent();\n    const [accepted, setAccepted] = useState(isAccepted());\n    const [rejected, setRejected] = useState(isRejected());\n\n    function onAcceptConsent() {\n        if (!isAccepted()) {\n            setAccepted(true);\n            setRejected(false);\n            clearConsent();\n            saveConsent();\n        }\n    }\n\n    function onRejectConsent() {\n        if (!isRejected()) {\n            setAccepted(false);\n            setRejected(true);\n            clearConsent();\n            rejectConsent();\n            window.close();\n        }\n    }\n\n    function onClearConsent() {\n        setRejected(false);\n        setAccepted(false);\n        clearConsent();\n    }\n\n    return <div className=\"cookie-consent-container\">\n        {!accepted &&\n        <div>\n            <Alert severity={rejected ? \"warning\" : \"info\"} variant=\"outlined\">\n                <AlertTitle>Cookies Consent</AlertTitle>\n                We use necessary cookies, localStorage for site to function. — <strong>We don't track users or\n                behavior.</strong>\n                <div className=\"button-container\">\n                    <Button variant=\"contained\" color=\"success\" onClick={onAcceptConsent}>Accept</Button>\n                    <Button onClick={onRejectConsent} variant=\"outlined\" color=\"error\">Reject</Button>\n                    <Button onClick={onClearConsent} variant=\"outlined\">Clear consent</Button>\n                </div>\n            </Alert>\n        </div>\n        }\n    </div>;\n}\n\nexport {CookieConsent};\n","import React, {useState} from \"react\";\nimport {Alert, AlertTitle, Button} from \"@material-ui/core\";\nimport {useViewersWarning} from \"../lib/localStorage.hooks\";\n\nfunction ViewersWarning() {\n    const {accept, reject, isAccepted} = useViewersWarning();\n    const [accepted, setAccepted] = useState(isAccepted());\n\n    const handleClose = () => {\n        setAccepted(false);\n        reject();\n        window.close();\n    };\n\n    const handleAccept = () => {\n        setAccepted(true);\n        accept();\n    };\n    return <div className=\"viewers-warning-container\">\n        {!accepted &&\n        <div>\n            <Alert severity=\"error\" variant=\"outlined\">\n                <AlertTitle>Warning: Unfiltered content.</AlertTitle>\n                This application fetches images from public service.<br/>\n                People may choose to upload disturbing content, containing but not limited to:<br/>\n                <strong>sexual, child abuse, self-harm, gore, mutilation etc.</strong>\n                <br/>\n                Continue only if you are okay with this.\n                <div className=\"button-container\">\n                    <Button variant=\"contained\" color=\"success\" onClick={handleAccept}>\n                        I understand. Let me continue to app anyway.\n                    </Button>\n                    <Button variant=\"outlined\" color=\"error\" onClick={handleClose}>\n                        Close the browser tab/window.\n                    </Button>\n                </div>\n            </Alert>\n        </div>\n        }\n    </div>;\n}\n\nexport default ViewersWarning;\n","import React, {useEffect, useState} from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n// import initialData from './photos.data.json';\nimport './styles/App.css';\nimport {GlobalAppState} from \"./lib/app.types\";\nimport {photosToImages} from \"./lib/photo.utils\";\nimport Photos from \"./components/Photos\";\nimport {TopBar} from './components/TopBar';\nimport {useSearchTerms} from \"./lib/localStorage.hooks\";\nimport {recentApi, searchApi} from \"./lib/flickr.apis\";\nimport {FlickrApiResponse} from \"./lib/flickr.types\";\nimport {CircularProgress, debounce} from \"@material-ui/core\";\nimport {CookieConsent} from \"./components/CookieConsent\";\nimport ViewersWarning from \"./components/ViewersWarning\";\nimport {useScroll} from \"./lib/scroll.hooks\";\n\nconst defaultState: GlobalAppState = {\n    isLoading: true,\n    loadingMessage: '',\n    hasError: false,\n    errorMessage: '',\n    error: undefined,\n    recentPhotos: [],\n    searchPhotos: [],\n    isInSearch: false,\n    isInRecent: false,\n    searchTerms: [],\n    currentSearchTerm: '',\n    page: 1,\n    perPage: 52,\n};\n\nfunction App() {\n    const [appState, setAppState] = useState(defaultState);\n    // const photos = photosToImages(initialData.photos.photo);\n    const {saveSearchTerm, fetchSearchTerms} = useSearchTerms();\n    const {scrollTop} = useScroll();\n\n    function fetchRecentFromNetwork(page: number, perPage: number) {\n        fetch(recentApi(page, perPage))\n            .then(res => res.json())\n            .then((data: FlickrApiResponse) => {\n                setAppState(s => ({\n                    ...s,\n                    isLoading: false,\n                    recentPhotos: [...appState.recentPhotos, ...photosToImages(data.photos.photo)],\n                    isInSearch: false,\n                    isInRecent: true,\n                    page: page + 1\n                }));\n            })\n            .catch(e => {\n                setAppState(s => ({\n                    ...s,\n                    error: e,\n                    hasError: true,\n                    isLoading: false,\n                }));\n            });\n    }\n\n    useEffect(() => {\n        // This effect fires only once, when we load due to empty dependency list.\n        fetchRecentFromNetwork(appState.page, appState.perPage);\n        setAppState(state => ({...state, searchTerms: fetchSearchTerms() || []}));\n    }, []);\n\n    useEffect(() => {\n        const st = fetchSearchTerms() || [];\n        setAppState(state => ({...state, searchTerms: st}));\n    }, [appState.isInSearch]);\n\n    useEffect(() => {\n        if (appState.isInRecent) {\n            // debounce(() => fetchRecentFromNetwork(appState.page, appState.perPage), 100);\n            fetchRecentFromNetwork(appState.page, appState.perPage)\n        }\n    }, [scrollTop]);\n\n    function activateSearch(searchTerm: string) {\n        if (searchTerm) {\n            saveSearchTerm(searchTerm);\n            setAppState(state => ({\n                ...state,\n                isLoading: true,\n                isInSearch: true,\n                isInRecent: false,\n                currentSearchTerm: searchTerm\n            }));\n\n            fetch(searchApi(searchTerm))\n                .then(res => res.json())\n                .then((data: FlickrApiResponse) => {\n                    console.log(data);\n                    setAppState(s => ({\n                        ...s,\n                        isLoading: false,\n                        searchPhotos: photosToImages(data.photos.photo),\n                        isInSearch: true,\n                        isInRecent: false\n                    }));\n                })\n                .catch(e => {\n                    setAppState(s => ({\n                        ...s,\n                        error: e,\n                        hasError: true,\n                        isLoading: false\n                    }));\n                });\n        }\n    }\n\n    function deactivateSearch() {\n        setAppState(state => ({...state, isInSearch: false, isInRecent: true}));\n    }\n\n    return (\n        <React.Fragment>\n            <CssBaseline/>\n            <div className=\"App\">\n                <TopBar searchProps={{\n                    isInSearch: appState.isInSearch,\n                    searchTerms: appState.searchTerms,\n                    searchPhotos: appState.searchPhotos,\n                    activateSearch,\n                    deactivateSearch,\n                    currentSearchTerm: appState.currentSearchTerm\n                }}/>\n                <CookieConsent/>\n                <ViewersWarning/>\n                {!appState.isInSearch && appState.isInRecent && <Photos photos={appState.recentPhotos}/>}\n                {appState.isInSearch && !appState.isInRecent && <Photos photos={appState.searchPhotos}/>}\n                {appState.isLoading && <CircularProgress/>}\n            </div>\n        </React.Fragment>\n    );\n}\n\nexport default App;\n","import {useEffect, useState} from \"react\";\nimport {debounce} from \"@material-ui/core\";\n\nfunction useScroll() {\n    const [scrollTop, setScrollTop] = useState(0);\n    const [scrollHeight, setScrollHeight] = useState(document.documentElement.scrollHeight);\n\n\n    useEffect(() => {\n        const onScroll = () => {\n            const st = document.documentElement.scrollTop;\n            const sh = document.documentElement.scrollHeight;\n            setScrollTop(st);\n            setScrollHeight(sh);\n        };\n\n        const debounced = debounce(onScroll, 400)\n        document.addEventListener(\"scroll\", debounced);\n\n        return () => document.removeEventListener(\"scroll\", debounced);\n    }, [scrollTop]);\n\n    return {scrollTop, scrollHeight};\n}\n\nexport {useScroll};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}