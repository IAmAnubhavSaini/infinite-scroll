(this["webpackJsonpreact-material-app"]=this["webpackJsonpreact-material-app"]||[]).push([[0],{88:function(e,t,c){},89:function(e,t,c){},96:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),o=c(30),a=c.n(o),i=(c(88),c(14)),s=c(16),l=c(11),u=c(143),j=(c(89),"_n"),h="_c";function f(e){return{small:"https://farm".concat(e.farm,".static.flickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret).concat(j,".jpg"),medium:"https://farm".concat(e.farm,".static.flickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret).concat(h,".jpg")}}function d(e){return e.map((function(e){return{url:f(e),alt:e.title,title:"".concat(e.title)}}))}var b=c(5),O=c(151),m=c(150),g=c(149),p=c(139),v=c(2),S=Object(b.a)(m.a)((function(e){var t=e.theme;return Object(s.a)(Object(s.a)({},t.typography.body2),{},{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary})}));var x=function(e){var t=e.photos,c=[t.filter((function(e,t){return t%4===0})),t.filter((function(e,t){return t%4===1})),t.filter((function(e,t){return t%4===2})),t.filter((function(e,t){return t%4===3}))];return Object(v.jsx)(O.a,{sx:{flexGrow:1},children:Object(v.jsx)(g.a,{container:!0,spacing:2,children:c.map((function(e,t){return Object(v.jsx)(g.a,{item:!0,xs:3,children:Object(v.jsx)(p.a,{spacing:2,children:e.map((function(e,t){return Object(v.jsx)(S,{children:Object(v.jsx)("img",{src:e.url.small,alt:e.alt,title:"".concat(e.title," at ").concat(e.url.small),style:{width:"100%"}})},"image-container-".concat(t))}))},"photos-stack-".concat(t))},"photos-grid-".concat(t))}))})})},I=c(153),C=c(154),w=c(155),T=c(156),k=c(144),y=c(145),_=c(49);function E(e){var t=e.searchTerms.reverse();function c(t,c,n){console.log(t,c,n),"input"===n&&e.activateSearch(c),"clear"===n&&e.deactivateSearch(),"selectOption"===n&&(console.log(c),e.activateSearch(c))}return Object(v.jsx)(k.a,{disablePortal:!0,className:"search-autocomplete",id:"search-bar-input",options:t,sx:{width:400},renderInput:function(e){return Object(v.jsx)(y.a,Object(s.a)(Object(s.a)({},e),{},{label:"Search"}))},onInputChange:Object(_.a)(c,400),noOptionsText:"",onChange:function(e,t,n){return c(e,t,n)},selectOnFocus:!0})}function P(e){return Object(v.jsx)(O.a,{sx:{flexGrow:1},className:"topbar-box",children:Object(v.jsx)(I.a,{position:"fixed",children:Object(v.jsxs)(C.a,{children:[Object(v.jsx)(w.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(v.jsx)(T.a,{href:"/infinite-scroll",underline:"none",color:"white",children:"Infinite Scroll"})}),Object(v.jsx)(E,Object(s.a)({},e.searchProps))]})})})}var R="SEARCH_TERMS",N="COOKIES_CONSENT",L="cookie_consent_accepted",A="cookie_consent_rejected",F="VIEWERS_WARNING",J="viewers_warning_accepted";function W(){if("undefined"===typeof localStorage)return!1;try{return localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test")&&(localStorage.removeItem("feature_test"),!0)}catch(e){return!1}}function G(e,t){if(W())if(function(e){if(W())return null!==localStorage.getItem(e)}(e)){var c=JSON.parse(localStorage.getItem(e));c.includes(t)?c=[].concat(Object(i.a)(c.slice(0,c.indexOf(t))),Object(i.a)(c.slice(c.indexOf(t)+1)),[t]):c.push(t),localStorage.setItem(e,JSON.stringify(c))}else{var n=[t];localStorage.setItem(e,JSON.stringify(n))}}var H="84bf9b29bce8db001d1e58dbec8a5770",M="format=json",B="nojsoncallback=1",D="https://api.flickr.com/services/rest/",K=c(159),U=c(147),V=c(157),q=c(158);function z(){var e={saveConsent:function(){localStorage.setItem(N,L)},fetchConsent:function(){return localStorage.getItem(N)},clearConsent:function(){localStorage.removeItem(N)},rejectConsent:function(){localStorage.setItem(N,A)},isRejected:function(){return localStorage.getItem(N)===A},isAccepted:function(){return localStorage.getItem(N)===L}},t=e.saveConsent,c=e.rejectConsent,r=e.isRejected,o=e.clearConsent,a=e.isAccepted,i=Object(n.useState)(a()),s=Object(l.a)(i,2),u=s[0],j=s[1],h=Object(n.useState)(r()),f=Object(l.a)(h,2),d=f[0],b=f[1];return Object(v.jsx)("div",{className:"cookie-consent-container",children:!u&&Object(v.jsx)("div",{children:Object(v.jsxs)(U.a,{severity:d?"warning":"info",variant:"outlined",children:[Object(v.jsx)(V.a,{children:"Cookies Consent"}),"We use necessary cookies, localStorage for site to function. \u2014 ",Object(v.jsx)("strong",{children:"We don't track users or behavior."}),Object(v.jsxs)("div",{className:"button-container",children:[Object(v.jsx)(q.a,{variant:"contained",color:"success",onClick:function(){a()||(j(!0),b(!1),o(),t())},children:"Accept"}),Object(v.jsx)(q.a,{onClick:function(){r()||(j(!1),b(!0),o(),c(),window.close())},variant:"outlined",color:"error",children:"Reject"}),Object(v.jsx)(q.a,{onClick:function(){b(!1),j(!1),o()},variant:"outlined",children:"Clear consent"})]})]})})})}var Q=function(){var e={accept:function(){localStorage.setItem(F,J)},reject:function(){localStorage.setItem(F,"viewers_warning_rejected")},isAccepted:function(){return localStorage.getItem(F)===J}},t=e.accept,c=e.reject,r=e.isAccepted,o=Object(n.useState)(r()),a=Object(l.a)(o,2),i=a[0],s=a[1];return Object(v.jsx)("div",{className:"viewers-warning-container",children:!i&&Object(v.jsx)("div",{children:Object(v.jsxs)(U.a,{severity:"error",variant:"outlined",children:[Object(v.jsx)(V.a,{children:"Warning: Unfiltered content."}),"This application fetches images from public service.",Object(v.jsx)("br",{}),"People may choose to upload disturbing content, containing but not limited to:",Object(v.jsx)("br",{}),Object(v.jsx)("strong",{children:"sexual, child abuse, self-harm, gore, mutilation etc."}),Object(v.jsx)("br",{}),"Continue only if you are okay with this.",Object(v.jsxs)("div",{className:"button-container",children:[Object(v.jsx)(q.a,{variant:"contained",color:"success",onClick:function(){s(!0),t()},children:"I understand. Let me continue to app anyway."}),Object(v.jsx)(q.a,{variant:"outlined",color:"error",onClick:function(){s(!1),c(),window.close()},children:"Close the browser tab/window."})]})]})})})};var X={isLoading:!0,loadingMessage:"",hasError:!1,errorMessage:"",error:void 0,recentPhotos:[],searchPhotos:[],isInSearch:!1,isInRecent:!1,searchTerms:[],currentSearchTerm:"",page:1,perPage:52};var Y=function(){var e=Object(n.useState)(X),t=Object(l.a)(e,2),c=t[0],o=t[1],a={saveSearchTerm:function(e){e&&e.length>=3&&G(R,e)},fetchSearchTerms:function(){return JSON.parse(localStorage.getItem(R))},clearSearchTerms:function(){localStorage.removeItem(R)}},j=a.saveSearchTerm,h=a.fetchSearchTerms,f=function(){var e=Object(n.useState)(0),t=Object(l.a)(e,2),c=t[0],r=t[1],o=Object(n.useState)(document.documentElement.scrollHeight),a=Object(l.a)(o,2),i=a[0],s=a[1];return Object(n.useEffect)((function(){var e=Object(_.a)((function(){var e=document.documentElement.scrollTop,t=document.documentElement.scrollHeight;r(e),s(t)}),400);return document.addEventListener("scroll",e),function(){return document.removeEventListener("scroll",e)}}),[c]),{scrollTop:c,scrollHeight:i}}().scrollTop;function b(e,t){fetch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:52;return"".concat(D,"?method=flickr.photos.getRecent&api_key=").concat(H,"&per_page=").concat(t,"&page=").concat(e,"&").concat(M,"&").concat(B)}(e,t)).then((function(e){return e.json()})).then((function(t){o((function(n){return Object(s.a)(Object(s.a)({},n),{},{isLoading:!1,recentPhotos:[].concat(Object(i.a)(c.recentPhotos),Object(i.a)(d(t.photos.photo))),isInSearch:!1,isInRecent:!0,page:e+1})}))})).catch((function(e){o((function(t){return Object(s.a)(Object(s.a)({},t),{},{error:e,hasError:!0,isLoading:!1})}))}))}return Object(n.useEffect)((function(){b(c.page,c.perPage),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchTerms:h()||[]})}))}),[]),Object(n.useEffect)((function(){var e=h()||[];o((function(t){return Object(s.a)(Object(s.a)({},t),{},{searchTerms:e})}))}),[c.isInSearch]),Object(n.useEffect)((function(){c.isInRecent&&b(c.page,c.perPage)}),[f]),Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsx)(u.a,{}),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(P,{searchProps:{isInSearch:c.isInSearch,searchTerms:c.searchTerms,searchPhotos:c.searchPhotos,activateSearch:function(e){var t;e&&(j(e),o((function(t){return Object(s.a)(Object(s.a)({},t),{},{isLoading:!0,isInSearch:!0,isInRecent:!1,currentSearchTerm:e})})),fetch((t=e,"".concat(D,"?method=flickr.photos.search&api_key=").concat(H,"&text=").concat(t,"&").concat(M,"&").concat(B))).then((function(e){return e.json()})).then((function(e){console.log(e),o((function(t){return Object(s.a)(Object(s.a)({},t),{},{isLoading:!1,searchPhotos:d(e.photos.photo),isInSearch:!0,isInRecent:!1})}))})).catch((function(e){o((function(t){return Object(s.a)(Object(s.a)({},t),{},{error:e,hasError:!0,isLoading:!1})}))})))},deactivateSearch:function(){o((function(e){return Object(s.a)(Object(s.a)({},e),{},{isInSearch:!1,isInRecent:!0})}))},currentSearchTerm:c.currentSearchTerm}}),Object(v.jsx)(z,{}),Object(v.jsx)(Q,{}),!c.isInSearch&&c.isInRecent&&Object(v.jsx)(x,{photos:c.recentPhotos}),c.isInSearch&&!c.isInRecent&&Object(v.jsx)(x,{photos:c.searchPhotos}),c.isLoading&&Object(v.jsx)(K.a,{})]})]})},Z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,160)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),o(e),a(e)}))};a.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[96,1,2]]]);
//# sourceMappingURL=main.bb5babac.chunk.js.map